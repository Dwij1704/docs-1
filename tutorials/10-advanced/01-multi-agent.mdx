---
title: "Multi-Agent Systems"
description: "Learn how to create and manage systems of collaborating AI agents"
---

# Building Multi-Agent Systems

Learn how to create complex systems with multiple collaborating AI agents.

## Prerequisites

Make sure you have:
- Completed the basic tutorials
- Understanding of basic agent concepts
- xpander.ai SDK installed

## System Architecture

<CardGroup cols={2}>
  <Card title="Supervisor Agent" icon="user-tie">
    Coordinates and manages worker agents
  </Card>
  
  <Card title="Worker Agents" icon="users-gear">
    Specialized agents that perform specific tasks
  </Card>
</CardGroup>

## Create a Supervisor Agent

```typescript
const supervisor = await client.createAgent({
  name: 'Supervisor',
  role: 'coordinator',
  model: 'gpt-4',
  capabilities: ['coordination', 'planning']
});

// Configure supervisor behavior
await supervisor.configure({
  maxWorkers: 5,
  delegationStrategy: 'round-robin',
  monitoring: true
});
```

## Create Worker Agents

```typescript
// Create specialized workers
const workers = await Promise.all([
  client.createAgent({
    name: 'DataProcessor',
    role: 'processor',
    capabilities: ['data-processing']
  }),
  client.createAgent({
    name: 'Analyzer',
    role: 'analyzer',
    capabilities: ['analysis']
  }),
  client.createAgent({
    name: 'Reporter',
    role: 'reporter',
    capabilities: ['reporting']
  })
]);

// Connect workers to supervisor
await supervisor.addWorkers(workers);
```

## Communication Patterns

```typescript
// Direct messaging
await supervisor.sendMessage(workers[0], {
  type: 'task',
  content: 'Process this dataset'
});

// Broadcast
await supervisor.broadcast({
  type: 'status-update',
  content: 'System maintenance in 5 minutes'
});

// Pub/Sub
const topic = await supervisor.createTopic('data-updates');
workers.forEach(worker => worker.subscribe(topic));
```

## Task Distribution

```typescript
// Define task types
const taskTypes = {
  'data-processing': workers[0],
  'analysis': workers[1],
  'reporting': workers[2]
};

// Distribute tasks
supervisor.on('task', async (task) => {
  const worker = taskTypes[task.type];
  if (worker) {
    await supervisor.delegate(worker, task);
  }
});

// Handle results
supervisor.on('result', async (result) => {
  console.log(`Task completed by ${result.worker}`);
  await supervisor.processResult(result);
});
```

## State Management

```typescript
// Shared state
const sharedState = new SharedState({
  type: 'distributed',
  persistence: true
});

// Connect agents to shared state
await Promise.all([
  supervisor.connectToState(sharedState),
  ...workers.map(w => w.connectToState(sharedState))
]);

// State synchronization
sharedState.on('change', (changes) => {
  console.log('State updated:', changes);
});
```

## Complete Example

```typescript
import { XpanderClient, SharedState } from '@xpander/sdk';

async function createMultiAgentSystem() {
  const client = new XpanderClient({
    apiKey: 'your-api-key'
  });

  // Create supervisor
  const supervisor = await client.createAgent({
    name: 'Supervisor',
    role: 'coordinator',
    model: 'gpt-4'
  });

  // Create workers
  const workers = await Promise.all([
    client.createAgent({
      name: 'DataProcessor',
      role: 'processor'
    }),
    client.createAgent({
      name: 'Analyzer',
      role: 'analyzer'
    })
  ]);

  // Set up shared state
  const sharedState = new SharedState({
    type: 'distributed'
  });

  // Connect all agents
  await supervisor.addWorkers(workers);
  await Promise.all([
    supervisor.connectToState(sharedState),
    ...workers.map(w => w.connectToState(sharedState))
  ]);

  // Handle tasks
  supervisor.on('task', async (task) => {
    const worker = workers.find(w => w.canHandle(task));
    if (worker) {
      await supervisor.delegate(worker, task);
    }
  });

  return {
    supervisor,
    workers,
    sharedState
  };
}

// Usage
const system = await createMultiAgentSystem();
console.log('Multi-agent system is ready!');
```

## Monitoring and Debugging

<CardGroup cols={2}>
  <Card title="System Metrics" icon="chart-line">
    ```typescript
    const metrics = await supervisor.getMetrics({
      timeframe: '1h',
      include: ['tasks', 'communication']
    });
    ```
  </Card>
  
  <Card title="Agent Status" icon="circle-info">
    ```typescript
    const status = await Promise.all(
      workers.map(w => w.getStatus())
    );
    console.log('Worker status:', status);
    ```
  </Card>
</CardGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Error Handling" icon="shield">
    Implement fallback strategies for agent failures
  </Card>
  
  <Card title="Load Balancing" icon="balance-scale">
    Distribute tasks evenly among workers
  </Card>
  
  <Card title="State Management" icon="database">
    Use distributed state for coordination
  </Card>
  
  <Card title="Monitoring" icon="gauge">
    Monitor system health and performance
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card 
    title="Custom Tools" 
    icon="wand-magic-sparkles"
    href="/tutorials/advanced/custom-tools"
  >
    Create advanced tools for your agents
  </Card>
  
  <Card 
    title="State Management" 
    icon="diagram-project"
    href="/tutorials/advanced/state-management"
  >
    Learn advanced state management techniques
  </Card>
</CardGroup> 